-- Script GUI Mobile para Grudar/Desgrudar Players
-- COM NOCLIP E SUPER GRUDENTO (s√≥ desgruda ao desativar)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local playerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Vari√°veis
local attachmentA, alignPos, alignOri = nil, nil, nil
local isAttached = false
local targetPlayer = nil
local posX, posY, posZ = 0, -1, 0
local step = 0.10
local noclipConnection = nil

print("üîÑ Iniciando cria√ß√£o da GUI Mobile com Noclip...")

-- Remover GUI antiga se existir
if playerGui:FindFirstChild("PlayerAttachGUI") then
    playerGui.PlayerAttachGUI:Destroy()
end

-- Criar GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PlayerAttachGUI"
screenGui.Parent = playerGui

-- Frame principal - Mobile
local mainFrame = Instance.new("Frame")
mainFrame.Parent = screenGui
mainFrame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.3)
mainFrame.BorderSizePixel = 2
mainFrame.BorderColor3 = Color3.new(0, 0.5, 1)
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.Size = UDim2.new(0, 350, 0, 280)
mainFrame.Active = true
mainFrame.Draggable = true

-- T√≠tulo
local titleLabel = Instance.new("TextLabel")
titleLabel.Parent = mainFrame
titleLabel.BackgroundTransparency = 1
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.Size = UDim2.new(1, 0, 0, 25)
titleLabel.Text = "Player Glue + Noclip - Mobile"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.TextSize = 18
titleLabel.Font = Enum.Font.SourceSansBold

-- TextBox para nick
local playerTextBox = Instance.new("TextBox")
playerTextBox.Parent = mainFrame
playerTextBox.BackgroundColor3 = Color3.new(0.3, 0.3, 0.4)
playerTextBox.BorderSizePixel = 1
playerTextBox.BorderColor3 = Color3.new(0.5, 0.5, 0.6)
playerTextBox.Position = UDim2.new(0, 15, 0, 35)
playerTextBox.Size = UDim2.new(1, -30, 0, 40)
playerTextBox.PlaceholderText = "Digite o nick do player..."
playerTextBox.Text = ""
playerTextBox.TextColor3 = Color3.new(1, 1, 1)
playerTextBox.TextSize = 18
playerTextBox.Font = Enum.Font.SourceSans

-- Bot√µes
local attachButton = Instance.new("TextButton")
attachButton.Parent = mainFrame
attachButton.BackgroundColor3 = Color3.new(0.2, 0.8, 0.2)
attachButton.BorderSizePixel = 1
attachButton.Position = UDim2.new(0, 15, 0, 85)
attachButton.Size = UDim2.new(0.48, -10, 0, 45)
attachButton.Text = "üîó GRUDAR"
attachButton.TextColor3 = Color3.new(1, 1, 1)
attachButton.TextSize = 18
attachButton.Font = Enum.Font.SourceSansBold

local detachButton = Instance.new("TextButton")
detachButton.Parent = mainFrame
detachButton.BackgroundColor3 = Color3.new(0.8, 0.2, 0.2)
detachButton.BorderSizePixel = 1
detachButton.Position = UDim2.new(0.52, 10, 0, 85)
detachButton.Size = UDim2.new(0.48, -10, 0, 45)
detachButton.Text = "üîì DESGRUDAR"
detachButton.TextColor3 = Color3.new(1, 1, 1)
detachButton.TextSize = 18
detachButton.Font = Enum.Font.SourceSansBold

-- Status
local statusLabel = Instance.new("TextLabel")
statusLabel.Parent = mainFrame
statusLabel.BackgroundTransparency = 1
statusLabel.Position = UDim2.new(0, 0, 0, 140)
statusLabel.Size = UDim2.new(1, 0, 0, 20)
statusLabel.Text = "Status: Livre | Noclip: OFF"
statusLabel.TextColor3 = Color3.new(0.8, 0.8, 0.8)
statusLabel.TextSize = 14
statusLabel.Font = Enum.Font.SourceSans

-- Coordenadas
local coordLabel = Instance.new("TextLabel")
coordLabel.Parent = mainFrame
coordLabel.BackgroundTransparency = 1
coordLabel.Position = UDim2.new(0, 0, 0, 165)
coordLabel.Size = UDim2.new(1, 0, 0, 20)
coordLabel.Text = "X: 0 | Y: -1 | Z: 0"
coordLabel.TextColor3 = Color3.new(1, 1, 0.4)
coordLabel.TextSize = 16
coordLabel.Font = Enum.Font.SourceSansBold

-- Controles (X, Y, Z)
local upButton = Instance.new("TextButton")
upButton.Parent = mainFrame
upButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.8)
upButton.Position = UDim2.new(0.5, -40, 0, 195)
upButton.Size = UDim2.new(0, 80, 0, 35)
upButton.Text = "‚¨Ü CIMA"
upButton.TextColor3 = Color3.new(1, 1, 1)
upButton.TextSize = 16
upButton.Font = Enum.Font.SourceSansBold

local downButton = Instance.new("TextButton")
downButton.Parent = mainFrame
downButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.8)
downButton.Position = UDim2.new(0.5, -40, 0, 235)
downButton.Size = UDim2.new(0, 80, 0, 35)
downButton.Text = "‚¨á BAIXO"
downButton.TextColor3 = Color3.new(1, 1, 1)
downButton.TextSize = 16
downButton.Font = Enum.Font.SourceSansBold

local leftButton = Instance.new("TextButton")
leftButton.Parent = mainFrame
leftButton.BackgroundColor3 = Color3.new(0.8, 0.3, 0.3)
leftButton.Position = UDim2.new(0, 15, 0, 195)
leftButton.Size = UDim2.new(0, 80, 0, 35)
leftButton.Text = "‚¨Ö ESQ"
leftButton.TextColor3 = Color3.new(1, 1, 1)
leftButton.TextSize = 16
leftButton.Font = Enum.Font.SourceSansBold

local rightButton = Instance.new("TextButton")
rightButton.Parent = mainFrame
rightButton.BackgroundColor3 = Color3.new(0.8, 0.3, 0.3)
rightButton.Position = UDim2.new(1, -95, 0, 195)
rightButton.Size = UDim2.new(0, 80, 0, 35)
rightButton.Text = "‚û° DIR"
rightButton.TextColor3 = Color3.new(1, 1, 1)
rightButton.TextSize = 16
rightButton.Font = Enum.Font.SourceSansBold

local frontButton = Instance.new("TextButton")
frontButton.Parent = mainFrame
frontButton.BackgroundColor3 = Color3.new(0.3, 0.8, 0.3)
frontButton.Position = UDim2.new(0, 15, 0, 235)
frontButton.Size = UDim2.new(0, 80, 0, 35)
frontButton.Text = "‚¨Ü FRENTE"
frontButton.TextColor3 = Color3.new(1, 1, 1)
frontButton.TextSize = 14
frontButton.Font = Enum.Font.SourceSansBold

local backButton = Instance.new("TextButton")
backButton.Parent = mainFrame
backButton.BackgroundColor3 = Color3.new(0.3, 0.8, 0.3)
backButton.Position = UDim2.new(1, -95, 0, 235)
backButton.Size = UDim2.new(0, 80, 0, 35)
backButton.Text = "‚¨á TR√ÅS"
backButton.TextColor3 = Color3.new(1, 1, 1)
backButton.TextSize = 14
backButton.Font = Enum.Font.SourceSansBold

-- Fun√ß√µes auxiliares
local function findPlayer(name)
    name = string.lower(name)
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            if string.find(string.lower(player.Name), name) or string.find(string.lower(player.DisplayName), name) then
                return player
            end
        end
    end
    return nil
end

-- NOCLIP FUNCTION
local function enableNoclip()
    if noclipConnection then return end
    
    noclipConnection = RunService.Stepped:Connect(function()
        pcall(function()
            local char = LocalPlayer.Character
            if char then
                for _, part in pairs(char:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
    end)
end

local function disableNoclip()
    if noclipConnection then
        noclipConnection:Disconnect()
        noclipConnection = nil
    end
    
    pcall(function()
        local char = LocalPlayer.Character
        if char then
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    part.CanCollide = true
                end
            end
        end
    end)
end

local function unglue()
    -- Desconectar noclip
    disableNoclip()
    
    if alignPos then alignPos:Destroy() end
    if alignOri then alignOri:Destroy() end
    if attachmentA then attachmentA:Destroy() end
    alignPos, alignOri, attachmentA = nil, nil, nil
    
    pcall(function()
        LocalPlayer.Character.Humanoid.PlatformStand = false
        LocalPlayer.Character.HumanoidRootPart.Anchored = false
    end)
    
    posX, posY, posZ = 0, -1, 0
    coordLabel.Text = "X: 0 | Y: -1 | Z: 0"
    isAttached = false
    targetPlayer = nil
    
    statusLabel.Text = "Status: Livre | Noclip: OFF"
    statusLabel.TextColor3 = Color3.new(0.8, 0.8, 0.8)
end

local function glueTo(targetPlayerObj)
    if not targetPlayerObj then
        statusLabel.Text = "Player n√£o encontrado!"
        statusLabel.TextColor3 = Color3.new(1, 0.4, 0.4)
        return
    end

    local targetChar = targetPlayerObj.Character
    local myChar = LocalPlayer.Character
    if not targetChar or not myChar then return end

    local rootMine = myChar:FindFirstChild("HumanoidRootPart")
    local rootTarget = targetChar:FindFirstChild("HumanoidRootPart")
    if not rootMine or not rootTarget then return end

    unglue()
    
    -- Ativar noclip
    enableNoclip()
    
    -- Posicionar
    rootMine.CFrame = rootTarget.CFrame * CFrame.new(posX, posY, posZ)

    local attMine = Instance.new("Attachment", rootMine)
    local attTarget = Instance.new("Attachment", rootTarget)
    attTarget.Position = Vector3.new(posX, posY, posZ)

    -- SUPER GRUDENTO - Configura√ß√µes maximizadas
    alignPos = Instance.new("AlignPosition", rootMine)
    alignPos.Attachment0 = attMine
    alignPos.Attachment1 = attTarget
    alignPos.RigidityEnabled = true
    alignPos.MaxForce = math.huge
    alignPos.MaxVelocity = math.huge
    alignPos.Responsiveness = 200
    alignPos.ApplyAtCenterOfMass = true

    alignOri = Instance.new("AlignOrientation", rootMine)
    alignOri.Attachment0 = attMine
    alignOri.Attachment1 = attTarget
    alignOri.RigidityEnabled = true
    alignOri.MaxTorque = math.huge
    alignOri.MaxAngularVelocity = math.huge
    alignOri.Responsiveness = 200
    alignOri.PrimaryAxisOnly = false

    attachmentA = attMine
    isAttached = true
    targetPlayer = targetPlayerObj

    -- Garantir que fica grudado (PlatformStand + prote√ß√µes extras)
    pcall(function()
        myChar.Humanoid.PlatformStand = true
        rootMine.Anchored = false
        
        -- Desabilitar for√ßas externas
        for _, part in pairs(myChar:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CustomPhysicalProperties = PhysicalProperties.new(0.7, 0, 0.5, 100, 100)
            end
        end
    end)

    statusLabel.Text = "Grudado: " .. targetPlayer.Name .. " | Noclip: ON"
    statusLabel.TextColor3 = Color3.new(0.4, 1, 0.4)
    coordLabel.Text = "X: " .. posX .. " | Y: " .. posY .. " | Z: " .. posZ
    
    -- Loop para manter grudado SEMPRE (prote√ß√£o extra)
    spawn(function()
        while isAttached and alignPos and alignPos.Parent do
            wait(0.1)
            pcall(function()
                if myChar and myChar:FindFirstChild("Humanoid") then
                    myChar.Humanoid.PlatformStand = true
                    myChar.Humanoid.Sit = false
                end
            end)
        end
    end)
end

local function updatePosition()
    if not isAttached or not alignPos or not alignPos.Attachment1 then return end
    alignPos.Attachment1.Position = Vector3.new(posX, posY, posZ)
    coordLabel.Text = "X: " .. posX .. " | Y: " .. posY .. " | Z: " .. posZ
end

-- Eventos de movimento
upButton.MouseButton1Click:Connect(function() if isAttached then posY += step; updatePosition() end end)
downButton.MouseButton1Click:Connect(function() if isAttached then posY -= step; updatePosition() end end)
leftButton.MouseButton1Click:Connect(function() if isAttached then posX -= step; updatePosition() end end)
rightButton.MouseButton1Click:Connect(function() if isAttached then posX += step; updatePosition() end end)
frontButton.MouseButton1Click:Connect(function() if isAttached then posZ -= step; updatePosition() end end)
backButton.MouseButton1Click:Connect(function() if isAttached then posZ += step; updatePosition() end end)

-- Bot√µes principais
attachButton.MouseButton1Click:Connect(function()
    local nickname = playerTextBox.Text
    if nickname ~= "" then
        local foundPlayer = findPlayer(nickname)
        glueTo(foundPlayer)
    else
        statusLabel.Text = "Digite um nick!"
        statusLabel.TextColor3 = Color3.new(1, 0.8, 0.2)
    end
end)

detachButton.MouseButton1Click:Connect(function()
    if isAttached then
        unglue()
        statusLabel.Text = "Desgrudado! | Noclip: OFF"
        statusLabel.TextColor3 = Color3.new(1, 0.6, 0.2)
    else
        statusLabel.Text = "N√£o est√° grudado!"
        statusLabel.TextColor3 = Color3.new(1, 0.4, 0.4)
    end
end)

-- Prote√ß√£o contra player sair
Players.PlayerRemoving:Connect(function(leavingPlayer)
    if targetPlayer == leavingPlayer then
        unglue()
        statusLabel.Text = "Player saiu do jogo"
        statusLabel.TextColor3 = Color3.new(1, 0.5, 0.5)
    end
end)

-- Prote√ß√£o contra morte/reset
LocalPlayer.CharacterAdded:Connect(function()
    if isAttached then
        wait(0.5)
        if targetPlayer and targetPlayer.Character then
            glueTo(targetPlayer)
        end
    end
end)

print("üéâ GUI MOBILE COM NOCLIP CARREGADA COM SUCESSO!")
print("‚úÖ Sistema super grudento ativado!")
print("‚úÖ Noclip autom√°tico quando grudado!")
